<fieldset style="margin:10px 0; padding:10px;">
  <legend>Talent Details</legend>

  <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
    <label>
      Key
      <input
        type="text"
        name="system.key"
        value="{{system.key}}"
        placeholder="e.g. fireball, sweeping_strike, frost_bolt"
      />
    </label>

    <label>
      Category
      <input
        type="text"
        name="system.category"
        value="{{system.category}}"
        placeholder="spell / special / weapon / etc."
      />
    </label>

    <label>
      Subtype
      <select name="system.subtype">
        {{#each talentSubtypes as |opt|}}
          <option
            value="{{opt}}"
            {{#if (eq ../system.subtype opt)}}selected{{/if}}
          >
            {{opt}}
          </option>
        {{/each}}
      </select>
    </label>

    <label>
      Governing Attribute
      <select name="system.governingAttribute">
        {{#each attributeOptions as |opt|}}
          <option
            value="{{opt}}"
            {{#if (eq ../system.governingAttribute opt)}}selected{{/if}}
          >
            {{opt}}
          </option>
        {{/each}}
      </select>
    </label>

    <label>
      Tier
      <input
        type="number"
        name="system.tier"
        value="{{system.tier}}"
        min="0"
      />
    </label>

    <label>
      Misc Bonus
      <input
        type="number"
        name="system.bonus.misc"
        value="{{system.bonus.misc}}"
      />
    </label>
  </div>
</fieldset>

<fieldset style="margin:10px 0; padding:10px;">
  <legend>Requirements</legend>

  {{!-- Spell requirement --}}
  {{#if (eq system.subtype "spell")}}
    <div style="display:grid; grid-template-columns: 1fr; gap:10px;">
      <label>
        Required Spell School (Skill Key)
        <input
          type="text"
          name="system.requirements.spellSchoolKey"
          value="{{system.requirements.spellSchoolKey}}"
          placeholder="e.g. pyromancy, illusion, necromancy"
        />
      </label>

      <p style="opacity:0.8; margin:0;">
        To cast this spell, the actor must have the spell school Skill with this key.
      </p>
    </div>
  {{/if}}

  {{!-- Special Attack requirement --}}
  {{#if (eq system.subtype "specialAttack")}}
    <div style="display:grid; grid-template-columns: 1fr; gap:10px;">
      <label>
        Required Weapon Type
        <select name="system.requirements.weaponType">
          <option value="" {{#if (eq system.requirements.weaponType "")}}selected{{/if}}>(none)</option>

          {{#each weaponTypes as |wt|}}
            <option
              value="{{wt}}"
              {{#if (eq ../system.requirements.weaponType wt)}}selected{{/if}}
            >
              {{wt}}
            </option>
          {{/each}}
        </select>
      </label>

      <p style="opacity:0.8; margin:0;">
        To use this special attack, the actor must be wielding a compatible weapon type.
      </p>
    </div>
  {{/if}}

  {{!-- If subtype is unset/unknown --}}
  {{#unless system.subtype}}
    <p style="opacity:0.8; margin:0;">
      Set a subtype to configure requirements.
    </p>
  {{/unless}}
</fieldset>

<fieldset style="margin:10px 0; padding:10px;">
  <legend>Modifiers</legend>

  <p style="opacity:0.8; margin:0 0 10px;">
    Modifiers define how this Talent affects attributes, resources, derived stats, or skills.
    Editing UI will be added later.
  </p>

  <pre style="white-space:pre-wrap; background:#111; color:#ddd; padding:8px; border-radius:4px;">{{json system.modifiers}}</pre>
</fieldset>
